box: phusion/baseimage
dev:
  steps:
    - add-to-known_hosts:
        hostname: toonverbeek.com
    - internal/shell:
        cmd: /bin/bash
        code: pwd
build:
  steps:
    - arjen/hugo-build:
        theme: redLounge
        flags: --buildDrafts=true
    - add-to-known_hosts:
        hostname: 188.226.136.184
        port: $PORT
    - script:
        code: cat /etc/ssh/ssh_known_hosts
deploy:
  steps:
    - add-to-known_hosts:
        hostname: 188.226.136.184
        port: $PORT
    - mktemp:
        envvar: PRIVATEKEY_PATH
    - create-file:
        name: write key
        filename: $PRIVATEKEY_PATH
        content: $SSH_PRIVATE
        overwrite: true
    - script:
        name: transfer app
        code: |-
         pwd
         ls -la
         echo catting ssh_known_hosts
         cat /etc/ssh/ssh_known_hosts
         echo catting PRIVATEKEY_PATH
         echo $PRIVATEKEY_PATH
         cat $PRIVATEKEY_PATH
         scp -i $PRIVATEKEY_PATH -P $PORT -r public/* $USER@toonverbeek.com:/var/www/toonverbeek.com/blog/
          
